{
  "test_name": "Complete Address Change Request Test",
  "description": "Comprehensive test for address change request API with all fields",
  "student_data": {
    "first_name": "Priya",
    "last_name": "Sharma",
    "dob": "1995-08-15",
    "gender": "Female",
    "nationality": "Indian",
    "student_type": "domestic",
    "contact_details": {
      "primary_mobile": "+91-9876543210",
      "email": "priya.sharma@example.com",
      "emergency_contact": "+91-9876543211",
      "contact_type": "mobile",
      "is_primary": true
    },
    "visa_details": {
      "visa_type": "Student Visa",
      "visa_number": "IND123456789",
      "start_date": "2023-01-01",
      "expiry_date": "2025-12-31",
      "status": "active",
      "issuing_country": "India"
    },
    "addresses": {
      "line1": "123 Old Street",
      "city": "Mumbai",
      "state": "Maharashtra",
      "country": "India",
      "postal_code": "400001",
      "address_type": "current",
      "is_primary": true
    }
  },
  "address_change_request": {
    "current_address": "123 Old Street, Mumbai, Maharashtra, India - 400001",
    "new_address": "456 New Colony, Pune, Maharashtra, India - 411001",
    "effective_date": "2024-02-01",
    "change_reason": "Relocated for better job opportunities and family convenience",
    "impact_acknowledged": true,
    "status": "pending"
  },
  "expected_responses": {
    "student_creation": {
      "success": true,
      "status_code": 201,
      "response_structure": {
        "success": true,
        "message": "Student created successfully",
        "data": {
          "student_id": "number",
          "first_name": "Priya",
          "last_name": "Sharma",
          "status": "active"
        }
      }
    },
    "address_change_request": {
      "success": true,
      "status_code": 201,
      "response_structure": {
        "success": true,
        "message": "Address change request created successfully",
        "data": {
          "acr_id": "number",
          "student_id": "number",
          "current_address": "123 Old Street, Mumbai, Maharashtra, India - 400001",
          "new_address": "456 New Colony, Pune, Maharashtra, India - 411001",
          "effective_date": "2024-02-01",
          "change_reason": "Relocated for better job opportunities and family convenience",
          "impact_acknowledged": true,
          "status": "pending"
        }
      }
    }
  },
  "test_commands": [
    "# Create Student",
    "curl -X POST http://localhost:3000/api/students \\",
    "  -H 'Content-Type: application/json' \\",
    "  -H 'Authorization: Bearer YOUR_TOKEN' \\",
    "  -d @final-test-complete.json",
    "",
    "# Create Address Change Request",
    "curl -X POST http://localhost:3000/api/students/{student_id}/address-change-requests \\",
    "  -H 'Content-Type: application/json' \\",
    "  -H 'Authorization: Bearer YOUR_TOKEN' \\",
    "  -d '{",
    "    \"current_address\": \"123 Old Street, Mumbai, Maharashtra, India - 400001\",",
    "    \"new_address\": \"456 New Colony, Pune, Maharashtra, India - 411001\",",
    "    \"effective_date\": \"2024-02-01\",",
    "    \"change_reason\": \"Relocated for better job opportunities and family convenience\",",
    "    \"impact_acknowledged\": true",
    "  }'"
  ],
  "verification_queries": [
    "-- Verify student creation",
    "SELECT student_id, first_name, last_name, status FROM students WHERE email = 'priya.sharma@example.com';",
    "",
    "-- Verify address change request creation",
    "SELECT acr_id, student_id, current_address, new_address, effective_date, change_reason, impact_acknowledged, status",
    "FROM address_change_requests",
    "WHERE student_id = (SELECT student_id FROM students WHERE email = 'priya.sharma@example.com');",
    "",
    "-- Check all related tables for completeness",
    "SELECT 'students' as table_name, COUNT(*) as record_count FROM students",
    "UNION ALL",
    "SELECT 'contact_details', COUNT(*) FROM contact_details",
    "UNION ALL", 
    "SELECT 'visa_details', COUNT(*) FROM visa_details",
    "UNION ALL",
    "SELECT 'addresses', COUNT(*) FROM addresses",
    "UNION ALL",
    "SELECT 'address_change_requests', COUNT(*) FROM address_change_requests;"
  ]
}